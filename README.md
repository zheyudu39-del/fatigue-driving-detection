# ğŸš— ç–²åŠ³é©¾é©¶æ£€æµ‹ç³»ç»Ÿ

åŸºäº MediaPipe + OpenCV + CNN çš„å®æ—¶ç–²åŠ³é©¾é©¶æ£€æµ‹ç³»ç»Ÿï¼Œæ”¯æŒ Web å‰ç«¯ç•Œé¢æ“ä½œã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- **å®æ—¶äººè„¸æ£€æµ‹**ï¼šåŸºäº MediaPipe Face Mesh çš„ 468 ä¸ªé¢éƒ¨å…³é”®ç‚¹æ£€æµ‹
- **çœ¼ç›çŠ¶æ€åˆ†æ**ï¼šé€šè¿‡ EARï¼ˆçœ¼ç›çºµæ¨ªæ¯”ï¼‰æ£€æµ‹é—­çœ¼çŠ¶æ€
- **å˜´å·´çŠ¶æ€åˆ†æ**ï¼šé€šè¿‡ MARï¼ˆå˜´å·´çºµæ¨ªæ¯”ï¼‰æ£€æµ‹æ‰“å“ˆæ¬ 
- **å¤´éƒ¨å§¿æ€ä¼°è®¡**ï¼šé€šè¿‡ PnP ç®—æ³•ä¼°è®¡ä¿¯ä»°è§’/åèˆªè§’/ç¿»æ»šè§’ï¼Œæ£€æµ‹ä½å¤´
- **ä¸‰ç§æ£€æµ‹æ¨¡å¼**ï¼š
  - ğŸ“ è§„åˆ™æ¨¡å¼ï¼šåŸºäºé˜ˆå€¼åˆ¤æ–­
  - ğŸ§  æ·±åº¦å­¦ä¹ æ¨¡å¼ï¼šåŸºäº CNN æ¨¡å‹åˆ†ç±»
  - ğŸ”€ æ··åˆæ¨¡å¼ï¼šè§„åˆ™ + æ·±åº¦å­¦ä¹ ç»“åˆ
- **Web å‰ç«¯ç•Œé¢**ï¼šæµè§ˆå™¨æ“ä½œï¼Œå®æ—¶è§†é¢‘æµ + æ•°æ®é¢æ¿ + ç³»ç»Ÿæ—¥å¿—
- **é˜ˆå€¼å¯è°ƒ**ï¼šå‰ç«¯å®æ—¶è°ƒæ•´ EAR/MAR/è§’åº¦é˜ˆå€¼å’Œå¸§æ•°
- **ç–²åŠ³è­¦å‘Š**ï¼šæ£€æµ‹åˆ°ç–²åŠ³æ—¶çº¢è‰²é—ªçƒè­¦å‘Š

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ detectors/          # æ£€æµ‹å™¨æ¨¡å—
â”‚   â”œâ”€â”€ face_detector.py      # äººè„¸æ£€æµ‹
â”‚   â”œâ”€â”€ eye_analyzer.py       # çœ¼ç›åˆ†æ
â”‚   â”œâ”€â”€ mouth_analyzer.py     # å˜´å·´åˆ†æ
â”‚   â””â”€â”€ head_pose_analyzer.py # å¤´éƒ¨å§¿æ€åˆ†æ
â”œâ”€â”€ evaluators/         # ç–²åŠ³è¯„ä¼°
â”‚   â””â”€â”€ fatigue_evaluator.py
â”œâ”€â”€ classifiers/        # æ·±åº¦å­¦ä¹ åˆ†ç±»å™¨
â”‚   â””â”€â”€ dl_classifier.py
â”œâ”€â”€ display/            # æ˜¾ç¤ºæ¸²æŸ“
â”‚   â””â”€â”€ renderer.py
â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹ & è®­ç»ƒæ¨¡å‹
â”‚   â”œâ”€â”€ data_models.py
â”‚   â””â”€â”€ trained/              # CNN æ¨¡å‹å­˜æ”¾ç›®å½•
â”œâ”€â”€ training/           # æ¨¡å‹è®­ç»ƒè„šæœ¬
â”‚   â””â”€â”€ train_cnn.py
â”œâ”€â”€ calibration/        # é˜ˆå€¼æ ¡å‡†
â”‚   â””â”€â”€ threshold_calibrator.py
â”œâ”€â”€ web/                # Web å‰ç«¯
â”‚   â”œâ”€â”€ templates/index.html
â”‚   â””â”€â”€ static/
â”œâ”€â”€ tests/              # æµ‹è¯•ç”¨ä¾‹
â”œâ”€â”€ web_app.py          # Flask Web æœåŠ¡
â”œâ”€â”€ main.py             # å‘½ä»¤è¡Œå…¥å£
â”œâ”€â”€ start.py            # ä¸€é”®å¯åŠ¨è„šæœ¬
â””â”€â”€ å¯åŠ¨æ£€æµ‹ç³»ç»Ÿ.bat     # Windows åŒå‡»å¯åŠ¨
```

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
pip install flask opencv-python mediapipe numpy scikit-learn
```

å¦‚éœ€ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¨¡å¼ï¼Œè¿˜éœ€å®‰è£…ï¼š
```bash
pip install tensorflow
```

### å¯åŠ¨ç³»ç»Ÿ

**æ–¹å¼ä¸€**ï¼šåŒå‡» `å¯åŠ¨æ£€æµ‹ç³»ç»Ÿ.bat`ï¼ˆWindowsï¼‰

**æ–¹å¼äºŒ**ï¼šå‘½ä»¤è¡Œè¿è¡Œ
```bash
python start.py
```

æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ `http://localhost:5000`

### è®­ç»ƒ CNN æ¨¡å‹

```bash
# è®­ç»ƒçœ¼éƒ¨æ¨¡å‹
python training/train_cnn.py --dataset_type eye --dataset_path <æ•°æ®é›†è·¯å¾„>

# è®­ç»ƒå˜´éƒ¨æ¨¡å‹
python training/train_cnn.py --dataset_type mouth --dataset_path <æ•°æ®é›†è·¯å¾„>
```

è®­ç»ƒå¥½çš„æ¨¡å‹æ”¾åˆ° `models/trained/` ç›®å½•ä¸‹ã€‚

## æŠ€æœ¯æ ˆ

- Python 3.8+
- MediaPipeï¼ˆäººè„¸å…³é”®ç‚¹æ£€æµ‹ï¼‰
- OpenCVï¼ˆå›¾åƒå¤„ç†ï¼‰
- TensorFlow/Kerasï¼ˆCNN æ¨¡å‹ï¼‰
- Flaskï¼ˆWeb æœåŠ¡ï¼‰
- NumPy / scikit-learn
